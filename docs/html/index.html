<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>arduino-audio-driver: Arduino Audio Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">arduino-audio-driver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Arduino Audio Driver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> I was never quite happy with my <a href="https://github.com/pschatzmann/arduino-audiokit">AudioKit project</a>, that was a quick and dirty adaptation of the Espressif IDF Drivers for Arduino. In this project I finally implemented some clean and simple C++ classes. This reduced the complexity considerably and increased the flexibility tremendously!</p>
<p>The goal of this project is to provide an easy API to configure different audio codec chips. After setting up the codec, you can use the I2S functionality provided by your microcontroller.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Predefined Boards</h1>
<p>A board definition consists of a driver class and pin definitions for that specific board. You can easily use the predefined boards. E.g. the following code is setting up and starting the codec on a Lyrat board:</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line"> </div>
<div class="line">#include &quot;AudioBoard.h&quot;</div>
<div class="line"> </div>
<div class="line">void setup() {</div>
<div class="line">  CodecConfig cfg;</div>
<div class="line">  cfg.adc_input = ADC_INPUT_LINE1;</div>
<div class="line">  cfg.dac_output = DAC_OUTPUT_ALL;</div>
<div class="line">  cfg.i2s.bits = BIT_LENGTH_16BITS;</div>
<div class="line">  cfg.i2s.rate = RATE_44K;</div>
<div class="line">  //cfg.i2s.fmt = I2S_NORMAL;</div>
<div class="line">  //cfg.i2s.mode = MODE_SLAVE; </div>
<div class="line">  LyratV43.begin(cfg);   </div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Custom Boards</h1>
<p>You can also easily define your custom boards by defining the driver and your specifc pins</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line"> </div>
<div class="line">#include &quot;AudioBoard.h&quot;</div>
<div class="line"> </div>
<div class="line">Pins my_pins;</div>
<div class="line">AudioBoard board(my_pins, &amp;AudioDriverES8388);</div>
<div class="line"> </div>
<div class="line">void setup() {</div>
<div class="line">  // add i2c codec pins: scl, sda, port</div>
<div class="line">  my_pins.addI2C(CODEC, 32, 22, 0x20);</div>
<div class="line">  // add i2s pins: mclk, bclk, ws, data_out, data_in</div>
<div class="line">  my_pins.addI2S(CODEC, 0, 27, 26, 25, 35);</div>
<div class="line">  // add other pins: PA on gpio 21</div>
<div class="line">  my_pins.addPin(PA, 21);</div>
<div class="line"> </div>
<div class="line">  // configure codec</div>
<div class="line">  CodecConfig cfg;</div>
<div class="line">  cfg.adc_input = ADC_INPUT_LINE1;</div>
<div class="line">  cfg.dac_output = DAC_OUTPUT_ALL;</div>
<div class="line">  cfg.i2s.bits = BIT_LENGTH_16BITS;</div>
<div class="line">  cfg.i2s.rate = RATE_44K;</div>
<div class="line">  //cfg.i2s.fmt = I2S_NORMAL;</div>
<div class="line">  //cfg.i2s.mode = MODE_SLAVE; </div>
<div class="line">  board.begin(cfg);   </div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md3"></a>
Logging</h1>
<p>The functionality has a built in logger. The default log level has been set to Warning. You can change it like this:</p>
<div class="fragment"><div class="line">{C++}</div>
<div class="line"> </div>
<div class="line"> LOGLEVEL_AUDIODRIVER = AudioDriverDebug; // or AudiDriverInfo, AudioDriverWarning, AudioDriverError</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
Support</h1>
<p>I spent a lot of time to provide a comprehensive and complete documentation. So please read the documentation first and check the issues and discussions before posting any new ones on Github.</p>
<p>Open issues only for bugs and if it is not a bug, use a discussion: Provide enough information about</p><ul>
<li>the selected scenario/sketch</li>
<li>what exactly you are trying to do</li>
<li>your hardware</li>
<li>your software versions</li>
<li>what exactly your problem is</li>
</ul>
<p>to enable others to understand and reproduce your issue.</p>
<p>Finally, <b>don't</b> send me any e-mails or post questions on my personal website!</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Installation in Arduino</h1>
<p>You can download the library as zip and call include Library -&gt; zip library. Or you can git clone this project into the Arduino libraries folder e.g. with</p>
<div class="fragment"><div class="line">cd  ~/Documents/Arduino/libraries</div>
<div class="line">git clone https://github.com/pschatzmann/arduino-audio-driver.git</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
